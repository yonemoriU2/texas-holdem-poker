# Implementation Plan

- [x] 1. プロジェクトセットアップとコア型定義

  - Vite + React + TypeScript + TailwindCSS プロジェクトを初期化
  - 基本的なディレクトリ構造を作成

  - カード、プレイヤー、ゲーム状態の型定義を実装
  - _Requirements: 1.1, 2.1, 5.1_

- [-] 2. カード関連ユーティリティとコンポーネントの実装



  - [ ] 2.1 カードユーティリティ関数の実装



    - デッキ生成、シャッフル、カード配布機能を実装
    - カード比較とソート機能を実装
    - ユニットテストを作成
    - _Requirements: 1.1, 6.4_

  - [x] 2.2 Card コンポーネントの実装

    - カード表示コンポーネントを作成（表面・裏面対応）
    - TailwindCSS でカードデザインを実装
    - フリップアニメーション機能を追加
    - _Requirements: 5.2, 5.4_
- [ ] 3. ハンド評価システムの実装






















- [x] 3. ハンド評価システムの実装

  - [x] 3.1 ハンドランク判定ロジックの実装


















    - 各ハンドタイプ（ロイヤルフラッシュ〜ハイカード）の判定関数を実装
    - 7 枚から 5 枚の最適な組み合わせを選択する機能を実装
    - ユニットテストで全ハンドタイプをテスト
    - _Requirements: 2.1, 2.2_

  - [x] 3.2 ハンド比較とタイブレーカーの実装

    - 同じハンドタイプ間でのキッカー比較機能を実装
    - ハンド強度スコア計算機能を実装
    - 複雑なタイブレーカーシナリオのテストを作成
    - _Requirements: 2.2_

- [x] 4. ゲーム状態管理の実装




  - [x] 4.1 GameContext と Reducer の実装

    - ゲーム状態管理用の Context API を実装
    - ゲームアクション（DEAL_CARDS、PLAYER_ACTION 等）の Reducer を実装
    - 状態遷移のユニットテストを作成
    - _Requirements: 1.1, 3.3, 6.4_

  - [x] 4.2 ゲームフロー制御ロジックの実装
    - プリフロップ〜リバーまでのフェーズ遷移ロジックを実装
    - ベッティングラウンド管理機能を実装
    - ショーダウンと勝者決定ロジックを実装
    - _Requirements: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_

  - [x] 4.3 ブラインド変動システムの実装
    - ブラインドレベル管理機能を実装
    - 自動ブラインド増加機能を実装
    - 手動ブラインド調整機能を実装
    - ブラインド変動ユーティリティ関数を作成
    - _Requirements: 1.2, 1.3, 1.4, 1.5_

  - [x] 4.4 BBアンティシステムの実装
    - BBアンティの計算と徴収機能を実装
    - アンティ額の表示機能を実装
    - アンティを含むポット計算機能を実装
    - _Requirements: 1.2, 1.3, 1.4, 1.5_

- [ ] 5. プレイヤーエリアコンポーネントの実装

  - プレイヤーと CPU の情報表示コンポーネントを実装
  - ホールカード表示（プレイヤーは表面、CPU は裏面）を実装
  - チップ数、ベット額、アクション状態の表示を実装
  - _Requirements: 5.1, 5.4_

- [x] 6. コミュニティカードエリアの実装

  - 5 枚のコミュニティカード表示エリアを実装
  - フロップ、ターン、リバーの段階的カード表示を実装
  - カード出現アニメーションを実装
  - _Requirements: 1.3, 1.4, 1.5, 5.2_

- [x] 7. ベッティングアクション UI の実装

  - [x] 7.1 基本アクションボタンの実装

    - フォールド、チェック/コール、ベット/レイズボタンを実装
    - アクション可能性に基づく動的ボタン表示を実装
    - ボタンクリック時のアクション処理を実装
    - _Requirements: 3.1, 3.3_

  - [x] 7.2 ベット額入力機能の実装
    - ベット額入力用のスライダーコンポーネントを実装
    - 最小/最大ベット額の制限機能を実装
    - プリセットベット額ボタン（ポットの 1/4、1/2、ポット）を実装
    - _Requirements: 3.2_

- [x] 8. AI（CPU）ロジックの実装

  - [x] 8.1 基本 AI 意思決定システムの実装

    - ハンド強度に基づく基本的なアクション選択ロジックを実装
    - ポットオッズ計算機能を実装
    - 思考時間シミュレーション機能を実装
    - _Requirements: 4.1, 4.2_

  - [x] 8.2 高度な AI 行動の実装
    - ブラフ機能（弱いハンドでのベット/レイズ）を実装
    - 適切なフォールド判定ロジックを実装
    - AI の行動パターンにランダム性を追加
    - _Requirements: 4.3, 4.4_

- [x] 9. ゲームボードメインコンポーネントの実装

  - 全体的なゲームレイアウトを実装
  - プレイヤーエリア、コミュニティカード、アクションボタンを統合
  - ポット額と現在のベット額表示を実装
  - GameContextを使用した状態管理を統合
  - AIの自動アクション機能を実装
  - デバッグ情報表示機能を追加
  - _Requirements: 5.1, 5.3_

- [x] 10. ゲーム進行とフェーズ管理の実装

  - [x] 10.1 各ベッティングラウンドの進行制御を実装
    - ベッティングラウンド完了判定ロジックを実装
    - フェーズ遷移条件チェック機能を実装
    - ゲーム進行管理ユーティリティ関数を作成
    - _Requirements: 1.2, 1.3, 1.4, 1.5_

  - [x] 10.2 プレイヤーと CPU のターン管理を実装
    - 次のアクティブプレイヤー決定ロジックを実装
    - プレイヤーアクション可能性チェック機能を実装
    - ターン表示コンポーネントを作成
    - _Requirements: 1.2, 1.3, 1.4, 1.5_

  - [x] 10.3 フェーズ遷移時のアニメーションと UI 更新を実装
    - フェーズ表示コンポーネントを作成
    - フェーズ遷移アニメーションコンポーネントを実装
    - ゲーム進行情報の視覚的表示を追加
    - _Requirements: 5.3_

- [x] 11. 勝敗判定とショーダウンの実装

  - [x] 11.1 ショーダウン時のハンド比較と勝者決定を実装
    - 詳細な勝敗判定ロジックを実装
    - フォールドによる勝利とハンド比較による勝利を区別
    - 引き分け処理を実装
    - _Requirements: 1.6, 2.3_

  - [x] 11.2 勝利ハンドの表示機能を実装
    - ShowdownDisplayコンポーネントを作成
    - 勝者のハンド情報とカードを表示
    - コミュニティカードとフォールドしたプレイヤーの表示
    - 引き分け時の表示処理を実装
    - _Requirements: 5.5_

  - [x] 11.3 チップの移動とポット分配を実装
    - ChipAnimationコンポーネントを作成
    - ポットから勝者へのチップ移動アニメーション
    - 正確なポット分配ロジック（端数処理含む）
    - アニメーション完了後の状態更新
    - _Requirements: 1.6, 2.3, 5.5_

- [ ] 12. ゲーム継続機能の実装

  - [ ] 12.1 新しいハンド開始機能の実装

    - 「新しいハンド」ボタンとその処理を実装
    - カードのリセットとシャッフル機能を実装
    - 次のハンドの初期化処理を実装
    - _Requirements: 6.1, 6.4_

  - [ ] 12.2 ゲーム終了と再開機能の実装
    - チップ切れ時のゲーム終了判定を実装
    - 「新しいゲーム」ボタンとゲームリセット機能を実装
    - 初期チップ数の復元機能を実装
    - _Requirements: 6.2, 6.3_

- [ ] 13. UI の改善とアニメーション追加

  - カード配布時のアニメーション効果を実装
  - ベッティングアクション時の視覚的フィードバックを追加
  - レスポンシブデザインの調整を実装
  - _Requirements: 5.2, 5.4_

- [ ] 14. エラーハンドリングとバリデーションの実装

  - 不正なゲーム状態の検出と修復機能を実装
  - ユーザー入力のバリデーション機能を実装
  - エラー表示用のモーダルコンポーネントを実装
  - _Requirements: 3.2, 3.3_

- [ ] 15. 統合テストと E2E テストの実装
  - 完全なゲームプレイシナリオのテストを作成
  - AI 行動の妥当性テストを実装
  - ユーザーインタラクションの統合テストを作成
  - _Requirements: 1.1-1.6, 2.1-2.3, 3.1-3.3, 4.1-4.4_
